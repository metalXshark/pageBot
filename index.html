<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Магазин напитков</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <h1>Добро пожаловать в наш магазин напитков!</h1>
    <div id="content">
        <!-- Контент будет загружаться сюда с помощью JavaScript -->
    </div>

    <script>
        $(document).ready(function() {
            loadDrinks();
        });

        function loadDrinks() {
            $.ajax({
                url: '/api/drinks',
                type: 'GET',
                success: function(response) {
                    $('#content').html('<h2>' + response.message + '</h2>');
                    response.drinks.forEach(drink => {
                        $('#content').append('<button onclick="selectDrink(\'' + drink + '\')">' + drink + '</button>');
                    });
                }
            });
        }

        function selectDrink(drink) {
            $.ajax({
                url: '/api/quantity',
                type: 'POST',
                data: JSON.stringify({ drink: drink }),
                contentType: 'application/json',
                success: function(response) {
                    $('#content').html('<h2>' + response.message + '</h2>');
                    response.quantities.forEach(quantity => {
                        $('#content').append('<button onclick="selectQuantity(\'' + drink + '\', \'' + quantity + '\')">' + quantity + '</button>');
                    });
                }
            });
        }

        function selectQuantity(drink, quantity) {
            $.ajax({
                url: '/api/confirm',
                type: 'POST',
                data: JSON.stringify({ drink: drink, quantity: quantity }),
                contentType: 'application/json',
                success: function(response) {
                    $('#content').html('<h2>' + response.message + '</h2>');
                    $('#content').append('<button onclick="finalizeOrder()">Подтвердить заказ</button>');
                    $('#content').append('<button onclick="cancelOrder()">Отменить заказ</button>');
                }
            });
        }

        function finalizeOrder() {
            $.ajax({
                url: '/api/finalize',
                type: 'POST',
                success: function(response) {
                    $('#content').html('<h2>' + response.message + '</h2>');
                }
            });
        }

        function cancelOrder() {
            $('#content').html('<h2>Ваш заказ был отменен.</h2>');
        }
    </script>
</body>
</html>
